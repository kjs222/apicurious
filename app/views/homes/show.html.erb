<div class="container">

<% if current_user %>

<div class="user-info col-sm-3">

<img src="<%= @user.image %>", class="profile-photo">
<br>
<h2><%= @user.name %></h2>
<h3><%= @user.nickname %></h3>



<div class="num-links col-sm-4">
  <%=link_to @stats.num_followers, followers_path%>
  <p>Followers</p>
</div>

<div class="num-links col-sm-4">
<%=link_to @stats.num_following, followings_path%>
<p>Following</p>
</div>

<div class="num-links col-sm-4">
<%=link_to @stats.num_stars, stars_path%>
<p>Starred Repos</p>
</div>

<h3>My Organizations</h3>
<% @organizations.each do |organization| %>
<a href="https://github.com/orgs/<%=organization.login%>"><%=organization.login%></a>
<% end %>
</div>

<div class="user-repos tab col-sm-9">
<h3>My Repos</h3>

<table class="table">
<% @repos.each do |repo| %>
<tr>
  <td>
    <%= link_to repo.name, repo.html_url, class: "repo-links" %>
    <p> <%= repo.description %></p>
    <p> <%= days_from_today repo.updated_at %> ago </p>
  </td>
</tr>
<% end %>

</table>
</div>


<div class="my-activity tab col-sm-9">
<h3>My Activity</h3>

<ul>
<% @activities.each do |activity| %>
  <% if activity.type == "PushEvent" %>
    <li>Commit for:
      <a href="https://github.com/<%=activity.repo['name']%>/commits?author?<%=activity.actor['login']%>"> <%= activity.repo['name'] %> </a>by <%= current_user.nickname %> </li>
  <% elsif activity.type == "PullRequestEvent" %>
        <li>Pull Request for:<a href="<%=activity.payload['pull_request']['html_url']%>"> <%= activity.repo['name'] %> </a>by <%= current_user.nickname %> </li>
  <% else %>
    <li> <%= activity.type %> for:
        <a href="https://github.com/<%=activity.repo['name']%>"> <%= activity.repo['name'] %> </a></li>
  <%end  %>

<% end %>

</ul>
</div>

<div class="other-activity tab col-sm-9">
  <h3>Activity for People I'm Following</h3>
  <ul>
    <% @others_activities.each do |activity| %>
      <% if activity.type == "PushEvent" %>
        <li>Commit for:
          <a href="https://github.com/<%=activity.repo['name']%>/commits?author?<%=activity.actor['login']%>"> <%= activity.repo['name'] %> </a>by <%= activity.actor["login"] %> </li>
      <% elsif activity.type == "PullRequestEvent" %>
            <li>Pull Request for:<a href="<%=activity.payload['pull_request']['html_url']%>"> <%= activity.repo['name'] %> </a>by <%= activity.actor["login"] %> </li>
      <% else %>
        <li> <%= activity.type %> for:
            <a href="https://github.com/<%=activity.repo['name']%>"> <%= activity.repo['name'] %> </a></li>
      <%end  %>

    <% end %>
  </ul>
</div>
<% end %>
</div>
